---
import Default from "../layouts/Default.astro";
import { pb } from "../services/pocketbase";
import {type Author} from "../services/pocketbase"

const projects = await pb.collection("projects").getList(1, 10, {expand: "authors,conference"})
---

<Default>
  <div class="p-7 space-y-7">
    <div class="mt-24 text-3xl font-medium">Кванториум.Проекты</div>

    <div class="grid gap-5 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
      {projects.items.map(project => <a href={"/project/" + project.id} class="space-y-3">
        <img src={pb.files.getUrl(project, project.cover, {thumb: "640x360"})} alt={project.id}>
        <div>
          <div>{project.title}</div>
          <div class="text-neutral-500">{project.expand?.authors.map(({firstName, lastName}: Author) => [firstName,lastName].join(" ")).join(", ")}</div>
        </div>
      </a>)}
    </div>
  </div>
</Default>
